sourceSets {
    main.resources.srcDirs += [ 'src/generated/resources' ]
}

architectury {
    def enabledPlatforms = [ ]

    if(findProject(':fabric') != null) {
        enabledPlatforms += 'fabric'
    }

    if(findProject(':mcforge') != null || findProject(':neoforge') != null) {
        enabledPlatforms += 'forge'
    }

    common(enabledPlatforms)
}

dependencies {
    // compileOnly to not be included in maven pom
    compileOnly "org.spongepowered:mixin:${MIXIN_VERSION}"

    compileOnly 'com.google.code.findbugs:jsr305:3.0.2'
    compileOnly 'com.google.errorprone:error_prone_annotations:2.11.0'

    if(rootProject.hasProperty('APEXCORE_DEV_VERSION')) {
        modImplementation "xyz.apex.minecraft.apexcore:apexcore-common:${APEXCORE_DEV_VERSION}"
    } else {
        modImplementation "xyz.apex.minecraft.apexcore:apexcore-common:${APEXCORE_VERSION}"
    }
}